<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Portfolio</h1>
    <div id="loading">Loading...</div>
    <div id="error" style="color: red; display: none;"></div>
    
    <table id="portfolioTable" style="display: none;">
        <thead>
            <tr>
                <th>Stock Symbol</th>
                <th>Quantity</th>
                <th>Current Value</th>
                <th>Total Value</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    
    <h2>Stock Distribution</h2>
    <canvas id="portfolioPieChart"></canvas>
    
    <h2>Portfolio Value Trend</h2>
    <canvas id="portfolioLineChart"></canvas>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch("http://localhost:5000/api/portfolio", { method: "GET", credentials: "include" })
                .then(response => response.json())
                .then(data => {
                    document.getElementById("loading").style.display = "none";
                    if (data.length > 0) {
                        document.getElementById("portfolioTable").style.display = "table";
                        const tableBody = document.querySelector("#portfolioTable tbody");
                        data.forEach(stock => {
                            const row = `<tr>
                                <td>${stock.stock_symbol}</td>
                                <td>${stock.quantity}</td>
                                <td>$${stock.current_value.toFixed(2)}</td>
                                <td>$${stock.total_value.toFixed(2)}</td>
                            </tr>`;
                            tableBody.innerHTML += row;
                        });

                        const pieCtx = document.getElementById("portfolioPieChart").getContext("2d");
                        new Chart(pieCtx, {
                            type: "pie",
                            data: {
                                labels: data.map(stock => stock.stock_symbol),
                                datasets: [{
                                    data: data.map(stock => stock.total_value),
                                    backgroundColor: ["#0088FE", "#00C49F", "#FFBB28", "#FF8042", "#A28DFF"]
                                }]
                            }
                        });

                        const lineCtx = document.getElementById("portfolioLineChart").getContext("2d");
                        new Chart(lineCtx, {
                            type: "line",
                            data: {
                                labels: data.map(stock => stock.stock_symbol),
                                datasets: [{
                                    label: "Portfolio Value",
                                    data: data.map(stock => stock.total_value),
                                    borderColor: "#8884d8",
                                    fill: false
                                }]
                            }
                        });
                    } else {
                        document.body.insertAdjacentHTML("beforeend", "<p>No portfolio data found.</p>");
                    }
                })
                .catch(error => {
                    document.getElementById("loading").style.display = "none";
                    document.getElementById("error").textContent = `Error fetching portfolio: ${error.message}`;
                    document.getElementById("error").style.display = "block";
                });
        });
    </script>
</body>
</html> -->

<h1>ðŸ“‚ Portfolio</h1>
<p>View and manage your stock portfolio here.</p>
